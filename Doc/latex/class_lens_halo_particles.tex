\hypertarget{class_lens_halo_particles}{}\doxysection{Lens\+Halo\+Particles$<$ P\+Type $>$ Class Template Reference}
\label{class_lens_halo_particles}\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}


A class that represents the lensing by a collection of simulation particles.  




{\ttfamily \#include $<$particle\+\_\+halo.\+h$>$}



Inheritance diagram for Lens\+Halo\+Particles$<$ P\+Type $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=182pt]{class_lens_halo_particles__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Lens\+Halo\+Particles$<$ P\+Type $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_lens_halo_particles__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_lens_halo_particles_a5882a56dbe8ad682f28f9590a271f1f5}{Lens\+Halo\+Particles}} (const std\+::string \&simulation\+\_\+filename, \mbox{\hyperlink{particle__types_8h_a37e57edf96c5308d47d38beee2b4cb2c}{Sim\+File\+Format}} format, Pos\+Type redshift, int Nsmooth, const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&cosmo, \mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}} theta\+\_\+rotate, bool recenter, bool my\+\_\+multimass, Pos\+Type Min\+P\+Size=0, Pos\+Type rescale\+\_\+mass=1.\+0, bool verbose=false)
\item 
\mbox{\hyperlink{class_lens_halo_particles_a4692c66694ee7189a33c865c8de34b79}{Lens\+Halo\+Particles}} (std\+::vector$<$ P\+Type $>$ \&pvector, float redshift, const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&cosmo, \mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}} theta\+\_\+rotate, bool recenter, float Min\+P\+Size=0, double max\+\_\+range=-\/1, bool verbose=false)
\item 
\mbox{\hyperlink{class_lens_halo_particles_acdc53a142a62cf81b72ef63a1164b819}{Lens\+Halo\+Particles}} (P\+Type $\ast$begin, size\+\_\+t n, float redshift, const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&cosmo, \mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}} theta\+\_\+rotate, bool recenter, float Min\+P\+Size=0, double max\+\_\+range=-\/1, bool verbose=false)
\begin{DoxyCompactList}\small\item\em this constructor does not take possession of the particles \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_lens_halo_particles_a0c31d8d5f869a0280a83113a85d5607d}\label{class_lens_halo_particles_a0c31d8d5f869a0280a83113a85d5607d}} 
{\bfseries Lens\+Halo\+Particles} (\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}} \&\&h)
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a408d7b39441e5444fc10e4553ce635f5}\label{class_lens_halo_particles_a408d7b39441e5444fc10e4553ce635f5}} 
\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$ \& {\bfseries operator=} (\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$ \&\&h)
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a9b240b0b6e022039c971dde8864ce6fd}\label{class_lens_halo_particles_a9b240b0b6e022039c971dde8864ce6fd}} 
void {\bfseries force\+\_\+halo} (double $\ast$alpha, Kappa\+Type $\ast$kappa, Kappa\+Type $\ast$gamma, Kappa\+Type $\ast$phi, double const $\ast$xcm, bool subtract\+\_\+point=false, Pos\+Type screening=1.\+0)
\item 
\mbox{\Hypertarget{class_lens_halo_particles_ae71fae2b5d397b865c2f8df70019bf42}\label{class_lens_halo_particles_ae71fae2b5d397b865c2f8df70019bf42}} 
size\+\_\+t {\bfseries getN} () const
\item 
void \mbox{\hyperlink{class_lens_halo_particles_a6d2a87ae29ff2a1840ffced17599d8a9}{rotate}} (\mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}} theta)
\begin{DoxyCompactList}\small\item\em rotate the simulation around the origin of the simulation coordinates, (radians) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_lens_halo_particles_a5b60131204bd264e6ceb0bc1852f27fb}\label{class_lens_halo_particles_a5b60131204bd264e6ceb0bc1852f27fb}} 
\mbox{\hyperlink{struct_point__3d}{Point\+\_\+3d}} \mbox{\hyperlink{class_lens_halo_particles_a5b60131204bd264e6ceb0bc1852f27fb}{Center\+Of\+Mass}} ()
\begin{DoxyCompactList}\small\item\em get current center of mass in input coordinates \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_lens_halo_particles_a0f055f6c37e1cedb5104c907e159fd6f}\label{class_lens_halo_particles_a0f055f6c37e1cedb5104c907e159fd6f}} 
\mbox{\hyperlink{struct_point__3d}{Point\+\_\+3d}} \mbox{\hyperlink{class_lens_halo_particles_a0f055f6c37e1cedb5104c907e159fd6f}{Densest\+Point}} ()
\begin{DoxyCompactList}\small\item\em get the densistt point in input coordinates \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_lens_halo_particles_a4fbe0f1a990d0e8c070e4f79b5c831b8}{read\+Position\+File\+A\+S\+C\+II}} (const std\+::string \&filename)
\begin{DoxyCompactList}\small\item\em Reads number of particle and particle positons into Npoint and xp from a A\+S\+C\+II file. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_lens_halo_particles_a6f74ecb8b18030fe0f01136192d9e4bb}{make\+S\+IE}} (std\+::string new\+\_\+filename, Pos\+Type redshift, double particle\+\_\+mass, double total\+\_\+mass, double sigma, double q, \mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&ran)
\begin{DoxyCompactList}\small\item\em This is a test static function that makes a truncated S\+IE out of particles and puts it into a file in the right format for constructing a \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ \mbox{\hyperlink{struct_particle_type_simple}{Particle\+Type\+Simple}} $>$ \mbox{\hyperlink{class_lens_halo_particles_a46def593bc40d817ca3c45d521b700ce}{S\+IE}} (Pos\+Type redshift, double particle\+\_\+mass, double total\+\_\+mass, double sigma, double q, int Nneighbors, \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&cosmo, \mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&ran)
\begin{DoxyCompactList}\small\item\em This is a test static function that makes a truncated S\+IE out of particles and puts it into a file in the right format for constructing a \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_lens_halo_particles_a8cbb000f56bbde0f4df611fe12580a41}\label{class_lens_halo_particles_a8cbb000f56bbde0f4df611fe12580a41}} 
static void {\bfseries calculate\+\_\+smoothing} (int Nsmooth, P\+Type $\ast$pp, size\+\_\+t Npoints, bool verbose=false)
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a99b7ae99ee5a6eb463c92aca9337e5a7}\label{class_lens_halo_particles_a99b7ae99ee5a6eb463c92aca9337e5a7}} 
static void {\bfseries write\+Sizes} (const std\+::string \&filename, int Nsmooth, const P\+Type $\ast$pp, size\+\_\+t Npoints)
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a199a8067e9aaa50fd8a56169f397f47e}\label{class_lens_halo_particles_a199a8067e9aaa50fd8a56169f397f47e}} 
static bool {\bfseries read\+Sizes\+File} (const std\+::string \&filename, P\+Type $\ast$pp, size\+\_\+t Npoints, int Nsmooth, Pos\+Type min\+\_\+size)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_lens_halo_particles_a287284a34695af4542c2dad6bf610baf}{Lens\+Halo\+Particles}} (float redshift, const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&cosmo)
\item 
\mbox{\hyperlink{class_lens_halo_particles_aec0507224635ca8027cae551b7b01ca7}{Lens\+Halo\+Particles}} (P\+Type $\ast$pdata, size\+\_\+t Nparticles, float redshift, const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&cosmo, \mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}} theta\+\_\+rotate, bool recenter, float Min\+P\+Size=0, bool verbose=false)
\item 
\mbox{\Hypertarget{class_lens_halo_particles_ab7fcf2f83bdba9b31b1016cc3df2055d}\label{class_lens_halo_particles_ab7fcf2f83bdba9b31b1016cc3df2055d}} 
void {\bfseries rotate\+\_\+particles} (Pos\+Type theta\+\_\+x, Pos\+Type theta\+\_\+y)
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a6f957aa525feeee444dc47085add1f2c}\label{class_lens_halo_particles_a6f957aa525feeee444dc47085add1f2c}} 
void {\bfseries assign\+Params} (\mbox{\hyperlink{class_input_params}{Input\+Params}} \&params)
\item 
void \mbox{\hyperlink{class_lens_halo_particles_a96e7e332fc3494f003293e608ebc5bb6}{set\+\_\+up}} (float redshift, const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&cosmo, \mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}} theta\+\_\+rotate, double max\+\_\+range, bool recenter, bool verbose)
\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a87e36e35d0508c4d3b91a5bf191bcd19}\label{class_lens_halo_particles_a87e36e35d0508c4d3b91a5bf191bcd19}} 
static void {\bfseries smooth\+\_\+} (\mbox{\hyperlink{class_tree_simple}{Tree\+Simple}}$<$ P\+Type $>$ $\ast$tree3d, P\+Type $\ast$xp, size\+\_\+t N, int Nsmooth)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a08e7a2adc2e0fcd9be5dbd40be1be230}\label{class_lens_halo_particles_a08e7a2adc2e0fcd9be5dbd40be1be230}} 
\mbox{\hyperlink{struct_point__3d}{Point\+\_\+3d}} {\bfseries mcenter}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a92c48538608447de920e68330e65db55}\label{class_lens_halo_particles_a92c48538608447de920e68330e65db55}} 
\mbox{\hyperlink{struct_point__3d}{Point\+\_\+3d}} {\bfseries densest\+\_\+point}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_af258c24e430a22a319fbaa3c6ebb539c}\label{class_lens_halo_particles_af258c24e430a22a319fbaa3c6ebb539c}} 
P\+Type $\ast$ {\bfseries pp}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_ae2f31c2fa0aa7c84e9d2ea351c009c1b}\label{class_lens_halo_particles_ae2f31c2fa0aa7c84e9d2ea351c009c1b}} 
std\+::vector$<$ P\+Type $>$ {\bfseries trash\+\_\+collector}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a59cf0f7d22f0236e72743b0b40f7d510}\label{class_lens_halo_particles_a59cf0f7d22f0236e72743b0b40f7d510}} 
Pos\+Type {\bfseries min\+\_\+size}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_aacc642153b2118db6d6bba63999fce7e}\label{class_lens_halo_particles_aacc642153b2118db6d6bba63999fce7e}} 
bool {\bfseries multimass}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a6bf7b3f409b77b485fd26f84d8dad9d6}\label{class_lens_halo_particles_a6bf7b3f409b77b485fd26f84d8dad9d6}} 
\mbox{\hyperlink{class_utilities_1_1_geometry_1_1_spherical_point}{Utilities\+::\+Geometry\+::\+Spherical\+Point}} {\bfseries center}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_aefb67743d0e07d92cffb95e0c806ea9e}\label{class_lens_halo_particles_aefb67743d0e07d92cffb95e0c806ea9e}} 
size\+\_\+t {\bfseries Npoints}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a63f276c45da25a100e18591d1335ecc4}\label{class_lens_halo_particles_a63f276c45da25a100e18591d1335ecc4}} 
std\+::string {\bfseries simfile}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a176395b7de82b6dfbaa9506db8552a1c}\label{class_lens_halo_particles_a176395b7de82b6dfbaa9506db8552a1c}} 
std\+::string {\bfseries sizefile}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a92c1fabc38cc0c336562249c22892328}\label{class_lens_halo_particles_a92c1fabc38cc0c336562249c22892328}} 
\mbox{\hyperlink{class_tree_quad_particles}{Tree\+Quad\+Particles}}$<$ P\+Type $>$ $\ast$ {\bfseries qtree}
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_lens_halo_particles_a478a724a7073c7df9c437f1c1880fa7a}\label{class_lens_halo_particles_a478a724a7073c7df9c437f1c1880fa7a}} 
class {\bfseries Make\+Particle\+Lenses}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename P\+Type$>$\newline
class Lens\+Halo\+Particles$<$ P\+Type $>$}

A class that represents the lensing by a collection of simulation particles. 

You can create a Lens\+Halo\+Particles$<$$>$ directly from a file, but it is recommended that you use the \mbox{\hyperlink{class_make_particle_lenses}{Make\+Particle\+Lenses}} class to create them and then move them to a \mbox{\hyperlink{class_lens}{Lens}} object.

Smoothing is done according to the density of particles in 3D. Smoothing sizes are either read in from a file (names simulation\+\_\+filename + \char`\"{}.\char`\"{} + Nsmooth + \char`\"{}sizes\char`\"{}) or calculated if the file does not exist (in which case the file is created). This can be time and memory consuming when there are a large number of particles.

Input format\+: A\+S\+C\+II -\/ a table of three floats for positions in comoving Mpc (no h factor). The lines \char`\"{}\# nparticles ....\char`\"{} and \char`\"{}\# mass ....\char`\"{} must be in header at the top of the file. \# is otherwise a comment character. Only one type of particle in a single input file.

More input formats will be added in the future. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_lens_halo_particles_a5882a56dbe8ad682f28f9590a271f1f5}\label{class_lens_halo_particles_a5882a56dbe8ad682f28f9590a271f1f5}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!LensHaloParticles@{LensHaloParticles}}
\index{LensHaloParticles@{LensHaloParticles}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{LensHaloParticles()}{LensHaloParticles()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}} (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{simulation\+\_\+filename,  }\item[{\mbox{\hyperlink{particle__types_8h_a37e57edf96c5308d47d38beee2b4cb2c}{Sim\+File\+Format}}}]{format,  }\item[{Pos\+Type}]{redshift,  }\item[{int}]{Nsmooth,  }\item[{const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&}]{cosmo,  }\item[{\mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}}}]{theta\+\_\+rotate,  }\item[{bool}]{recenter,  }\item[{bool}]{my\+\_\+multimass,  }\item[{Pos\+Type}]{Min\+P\+Size = {\ttfamily 0},  }\item[{Pos\+Type}]{rescale\+\_\+mass = {\ttfamily 1.0},  }\item[{bool}]{verbose = {\ttfamily false} }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em simulation\+\_\+filename} & name of data files \\
\hline
{\em format} & format of data file \\
\hline
{\em redshift} & redshift of origin \\
\hline
{\em Nsmooth} & number of neighbours for adaptive smoothing \\
\hline
{\em cosmo} & cosmology \\
\hline
{\em theta\+\_\+rotate} & rotation of particles around the origin \\
\hline
{\em recenter} & center on center of mass \\
\hline
{\em my\+\_\+multimass} & set to true is particles have different sizes \\
\hline
{\em Min\+P\+Size} & minimum particle size in Mpc, overrides nearest neighbors aor input sizes for small particle sizes \\
\hline
{\em rescale\+\_\+mass} & rescale particle masses \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_lens_halo_particles_a4692c66694ee7189a33c865c8de34b79}\label{class_lens_halo_particles_a4692c66694ee7189a33c865c8de34b79}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!LensHaloParticles@{LensHaloParticles}}
\index{LensHaloParticles@{LensHaloParticles}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{LensHaloParticles()}{LensHaloParticles()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}} (\begin{DoxyParamCaption}\item[{std\+::vector$<$ P\+Type $>$ \&}]{pvector,  }\item[{float}]{redshift,  }\item[{const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&}]{cosmo,  }\item[{\mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}}}]{theta\+\_\+rotate,  }\item[{bool}]{recenter,  }\item[{float}]{Min\+P\+Size = {\ttfamily 0},  }\item[{double}]{max\+\_\+range = {\ttfamily -\/1},  }\item[{bool}]{verbose = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}{Parameters}
{\em pvector} & list of particles pdata\mbox{[}\mbox{]}\mbox{[}i\mbox{]} should be the position in physical Mpc, the class takes possession of the data and leaves the vector empty \\
\hline
{\em redshift} & redshift of origin \\
\hline
{\em cosmo} & cosmology \\
\hline
{\em theta\+\_\+rotate} & rotation of particles around the origin \\
\hline
{\em recenter} & center on center of mass \\
\hline
{\em Min\+P\+Size} & minimum particle size \\
\hline
{\em max\+\_\+range} & if set this will cause the tree not be fully construct down to the bucket size outside this range \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_lens_halo_particles_acdc53a142a62cf81b72ef63a1164b819}\label{class_lens_halo_particles_acdc53a142a62cf81b72ef63a1164b819}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!LensHaloParticles@{LensHaloParticles}}
\index{LensHaloParticles@{LensHaloParticles}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{LensHaloParticles()}{LensHaloParticles()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}} (\begin{DoxyParamCaption}\item[{P\+Type $\ast$}]{begin,  }\item[{size\+\_\+t}]{n,  }\item[{float}]{redshift,  }\item[{const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&}]{cosmo,  }\item[{\mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}}}]{theta\+\_\+rotate,  }\item[{bool}]{recenter,  }\item[{float}]{Min\+P\+Size = {\ttfamily 0},  }\item[{double}]{max\+\_\+range = {\ttfamily -\/1},  }\item[{bool}]{verbose = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



this constructor does not take possession of the particles 


\begin{DoxyParams}{Parameters}
{\em begin} & pointer to first particles pdata\mbox{[}\mbox{]}\mbox{[}i\mbox{]} should be the position in physical Mpc, the class takes possession of the data and leaves the vector empty \\
\hline
{\em redshift} & redshift of origin \\
\hline
{\em cosmo} & cosmology \\
\hline
{\em theta\+\_\+rotate} & rotation of particles around the origin \\
\hline
{\em recenter} & center on center of mass \\
\hline
{\em Min\+P\+Size} & minimum particle size \\
\hline
{\em max\+\_\+range} & if set this will cause the tree not be fully construct down to the bucket size outside this range \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_lens_halo_particles_a287284a34695af4542c2dad6bf610baf}\label{class_lens_halo_particles_a287284a34695af4542c2dad6bf610baf}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!LensHaloParticles@{LensHaloParticles}}
\index{LensHaloParticles@{LensHaloParticles}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{LensHaloParticles()}{LensHaloParticles()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}} (\begin{DoxyParamCaption}\item[{float}]{redshift,  }\item[{const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&}]{cosmo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}


\begin{DoxyParams}{Parameters}
{\em redshift} & redshift of origin \\
\hline
{\em cosmo} & cosmology \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_lens_halo_particles_aec0507224635ca8027cae551b7b01ca7}\label{class_lens_halo_particles_aec0507224635ca8027cae551b7b01ca7}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!LensHaloParticles@{LensHaloParticles}}
\index{LensHaloParticles@{LensHaloParticles}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{LensHaloParticles()}{LensHaloParticles()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}} (\begin{DoxyParamCaption}\item[{P\+Type $\ast$}]{pdata,  }\item[{size\+\_\+t}]{Nparticles,  }\item[{float}]{redshift,  }\item[{const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&}]{cosmo,  }\item[{\mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}}}]{theta\+\_\+rotate,  }\item[{bool}]{recenter,  }\item[{float}]{Min\+P\+Size = {\ttfamily 0},  }\item[{bool}]{verbose = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}


\begin{DoxyParams}{Parameters}
{\em pdata} & particle data (all physical distances) \\
\hline
{\em redshift} & redshift of origin \\
\hline
{\em cosmo} & cosmology \\
\hline
{\em theta\+\_\+rotate} & rotation of particles around the origin \\
\hline
{\em recenter} & center on center of mass \\
\hline
{\em Min\+P\+Size} & minimum particle size \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_lens_halo_particles_a6f74ecb8b18030fe0f01136192d9e4bb}\label{class_lens_halo_particles_a6f74ecb8b18030fe0f01136192d9e4bb}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!makeSIE@{makeSIE}}
\index{makeSIE@{makeSIE}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{makeSIE()}{makeSIE()}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
void \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::make\+S\+IE (\begin{DoxyParamCaption}\item[{std\+::string}]{new\+\_\+filename,  }\item[{Pos\+Type}]{redshift,  }\item[{double}]{particle\+\_\+mass,  }\item[{double}]{total\+\_\+mass,  }\item[{double}]{sigma,  }\item[{double}]{q,  }\item[{\mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&}]{ran }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



This is a test static function that makes a truncated S\+IE out of particles and puts it into a file in the right format for constructing a \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}. 

This is useful for calculating the level of shot noise and finite source size. The particles are distributed in 3D according to the S\+IE profile with only the perpendicular coordinates (1st and 2nd) distorted into an elliptical shape. If the halo is rotated from the original orientation it will not be a oblate spheroid. 
\begin{DoxyParams}{Parameters}
{\em new\+\_\+filename} & file name to store the particles \\
\hline
{\em redshift} & redshift of particles \\
\hline
{\em particle\+\_\+mass} & particle mass \\
\hline
{\em total\+\_\+mass} & total mass of S\+IE \\
\hline
{\em sigma} & velocity dispersion in km/s \\
\hline
{\em q} & axis ratio \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_lens_halo_particles_a4fbe0f1a990d0e8c070e4f79b5c831b8}\label{class_lens_halo_particles_a4fbe0f1a990d0e8c070e4f79b5c831b8}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!readPositionFileASCII@{readPositionFileASCII}}
\index{readPositionFileASCII@{readPositionFileASCII}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{readPositionFileASCII()}{readPositionFileASCII()}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
void \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::read\+Position\+File\+A\+S\+C\+II (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename }\end{DoxyParamCaption})}



Reads number of particle and particle positons into Npoint and xp from a A\+S\+C\+II file. 

Data file must have the lines \char`\"{}\# nparticles $\ast$$\ast$$\ast$\char`\"{} and \char`\"{}\# mass $\ast$$\ast$$\ast$\char`\"{} in the header. All header lines must begin with a \char`\"{}\# \char`\"{}

Coordinates of particles are in physical Mpc units. \mbox{\Hypertarget{class_lens_halo_particles_a6d2a87ae29ff2a1840ffced17599d8a9}\label{class_lens_halo_particles_a6d2a87ae29ff2a1840ffced17599d8a9}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!rotate@{rotate}}
\index{rotate@{rotate}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{rotate()}{rotate()}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
void \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::rotate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}}}]{theta }\end{DoxyParamCaption})}



rotate the simulation around the origin of the simulation coordinates, (radians) 

rotate simulation \mbox{\Hypertarget{class_lens_halo_particles_a96e7e332fc3494f003293e608ebc5bb6}\label{class_lens_halo_particles_a96e7e332fc3494f003293e608ebc5bb6}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!set\_up@{set\_up}}
\index{set\_up@{set\_up}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{set\_up()}{set\_up()}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
void \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::set\+\_\+up (\begin{DoxyParamCaption}\item[{float}]{redshift,  }\item[{const \mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&}]{cosmo,  }\item[{\mbox{\hyperlink{struct_point__2d}{Point\+\_\+2d}}}]{theta\+\_\+rotate,  }\item[{double}]{max\+\_\+range,  }\item[{bool}]{recenter,  }\item[{bool}]{verbose }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyParams}{Parameters}
{\em redshift} & redshift of origin \\
\hline
{\em cosmo} & cosmology \\
\hline
{\em theta\+\_\+rotate} & rotation of particles around the origin \\
\hline
{\em recenter} & center on center of mass \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_lens_halo_particles_a46def593bc40d817ca3c45d521b700ce}\label{class_lens_halo_particles_a46def593bc40d817ca3c45d521b700ce}} 
\index{LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}!SIE@{SIE}}
\index{SIE@{SIE}!LensHaloParticles$<$ PType $>$@{LensHaloParticles$<$ PType $>$}}
\doxysubsubsection{\texorpdfstring{SIE()}{SIE()}}
{\footnotesize\ttfamily template$<$typename P\+Type $>$ \\
\mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ \mbox{\hyperlink{struct_particle_type_simple}{Particle\+Type\+Simple}} $>$ \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}$<$ P\+Type $>$\+::S\+IE (\begin{DoxyParamCaption}\item[{Pos\+Type}]{redshift,  }\item[{double}]{particle\+\_\+mass,  }\item[{double}]{total\+\_\+mass,  }\item[{double}]{sigma,  }\item[{double}]{q,  }\item[{int}]{Nneighbors,  }\item[{\mbox{\hyperlink{class_c_o_s_m_o_l_o_g_y}{C\+O\+S\+M\+O\+L\+O\+GY}} \&}]{cosmo,  }\item[{\mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&}]{ran }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



This is a test static function that makes a truncated S\+IE out of particles and puts it into a file in the right format for constructing a \mbox{\hyperlink{class_lens_halo_particles}{Lens\+Halo\+Particles}}. 

This is useful for calculating the level of shot noise and finite source size. The particles are distributed in 3D according to the S\+IE profile with only the perpendicular coordinates (1st and 2nd) distorted into an elliptical shape. If the halo is rotated from the original orientation it will not be a oblate spheroid. 
\begin{DoxyParams}{Parameters}
{\em redshift} & redshift of particles \\
\hline
{\em particle\+\_\+mass} & particle mass \\
\hline
{\em total\+\_\+mass} & total mass of S\+IE \\
\hline
{\em sigma} & velocity dispersion in km/s \\
\hline
{\em q} & axis ratio \\
\hline
{\em Nneighbors} & number of neighbor particles used in smoothing \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
S\+Lsim\+Lib/include/particle\+\_\+halo.\+h\end{DoxyCompactItemize}
