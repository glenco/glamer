\doxysection{Observation Class Reference}
\hypertarget{class_observation}{}\label{class_observation}\index{Observation@{Observation}}


It creates a realistic image from the output of a ray-\/tracing simulation.  




{\ttfamily \#include $<$image\+\_\+processing.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_observation_af8238641e874a89a1e579dd6ae40491b}{Observation}} (Telescope tel\+\_\+name, double exposure\+\_\+time, int exposure\+\_\+num, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, float oversample)
\begin{DoxyCompactList}\small\item\em Creates an observation setup that mimics a known instrument. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_observation_ab99834678bfa2e4381818218a07b8e2d}{Observation}} (float diameter, float transmission, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float seeing=0.)
\item 
\mbox{\hyperlink{class_observation_ab842a1f17359571a3ca2008694a232f2}{Observation}} (float diameter, float transmission, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, std\+::string psf\+\_\+file, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float oversample=1.)
\item 
\mbox{\hyperlink{class_observation_ad634b9053c3e27dd17614628602e00a0}{Observation}} (float zeropoint\+\_\+mag, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float seeing=0)
\item 
\mbox{\hyperlink{class_observation_a30716af254518e91b4bbce9fc6912f64}{Observation}} (float zeropoint\+\_\+mag, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, std\+::string psf\+\_\+file, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float oversample=1.)
\item 
\Hypertarget{class_observation_a1b0da1260df5bfe9eb7a5e7b3bd175ea}\label{class_observation_a1b0da1260df5bfe9eb7a5e7b3bd175ea} 
float {\bfseries get\+Exp\+Time} () const
\item 
\Hypertarget{class_observation_a9edc68c423a9f2882c50f8eb688af763}\label{class_observation_a9edc68c423a9f2882c50f8eb688af763} 
int {\bfseries get\+Exp\+Num} () const
\item 
\Hypertarget{class_observation_af08c80bc26f44e87047de91993e21332}\label{class_observation_af08c80bc26f44e87047de91993e21332} 
float {\bfseries get\+Back\+Mag} () const
\item 
\Hypertarget{class_observation_a142c63994e94603016c90e5dc4aba6fc}\label{class_observation_a142c63994e94603016c90e5dc4aba6fc} 
float {\bfseries get\+Ron} () const
\begin{DoxyCompactList}\small\item\em read-\/out noise in electrons/pixel \end{DoxyCompactList}\item 
\Hypertarget{class_observation_af67cdb34b8ae50c22243ad3f7cfe3926}\label{class_observation_af67cdb34b8ae50c22243ad3f7cfe3926} 
float {\bfseries get\+Seeing} () const
\begin{DoxyCompactList}\small\item\em seeing in arcsecs \end{DoxyCompactList}\item 
\Hypertarget{class_observation_af8fa0620fb804297e4db01f9da32e747}\label{class_observation_af8fa0620fb804297e4db01f9da32e747} 
float {\bfseries get\+Zeropoint} () const
\item 
\Hypertarget{class_observation_a44244c829e396232835d2c9e7f7bc480}\label{class_observation_a44244c829e396232835d2c9e7f7bc480} 
void {\bfseries set\+Zeropoint} (double zpoint)
\item 
float \mbox{\hyperlink{class_observation_a1866e210a777eb8cadc9d33237f6df2f}{get\+Background\+Noise}} (float resolution, Unit\+Type unit=Unit\+Type\+::counts\+\_\+x\+\_\+sec) const
\begin{DoxyCompactList}\small\item\em pixel size in radians \end{DoxyCompactList}\item 
\Hypertarget{class_observation_a9355303af83acb36adf80e5427447c7b}\label{class_observation_a9355303af83acb36adf80e5427447c7b} 
float {\bfseries get\+Background\+Noise} () const
\item 
\Hypertarget{class_observation_ab14b47afd127413449760aebc39245d6}\label{class_observation_ab14b47afd127413449760aebc39245d6} 
{\footnotesize template$<$typename T $>$ }\\void {\bfseries Add\+Noise} (\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&pmap, \mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&error\+\_\+map, \mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&ran, bool dummy)
\begin{DoxyCompactList}\small\item\em Applies realistic noise (read-\/out + Poisson) on an image, returns noise map. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{class_observation_aa3d49144d1e21e4900d12f5f5abf4535}{Convert}} (\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&map\+\_\+in, \mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&map\+\_\+out, \mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&error\+\_\+map, bool psf, bool noise, \mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&ran, bool cosmic=false)
\begin{DoxyCompactList}\small\item\em Converts the input map to a realistic image. \end{DoxyCompactList}\item 
\Hypertarget{class_observation_a670be0f361abb519391ff0c30c907c1d}\label{class_observation_a670be0f361abb519391ff0c30c907c1d} 
void {\bfseries set\+Exp\+Time} (float time)
\begin{DoxyCompactList}\small\item\em returns factor by which code image units need to be multiplied by to get flux units \end{DoxyCompactList}\item 
\Hypertarget{class_observation_a99fdbd23ab8d25e959cee5c215b464d2}\label{class_observation_a99fdbd23ab8d25e959cee5c215b464d2} 
void {\bfseries set\+Pixel\+Size} (float pixel\+\_\+size)
\item 
\Hypertarget{class_observation_aa33b0cd169875e9ed9751dff97c63df7}\label{class_observation_aa33b0cd169875e9ed9751dff97c63df7} 
double {\bfseries mag\+\_\+to\+\_\+counts} (double m) const
\item 
\Hypertarget{class_observation_a76cd9dea1231a32f401ee53f7cf9ca44}\label{class_observation_a76cd9dea1231a32f401ee53f7cf9ca44} 
double {\bfseries counts\+\_\+to\+\_\+mag} (double flux) const
\item 
\Hypertarget{class_observation_aa2bbb86a3941202abaff8d226664cddf}\label{class_observation_aa2bbb86a3941202abaff8d226664cddf} 
double {\bfseries zeropoint} () const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
It creates a realistic image from the output of a ray-\/tracing simulation. 

It translates pixel values in observed units (counts/sec), applies PSF and noise. Input must be in ergs/(s\texorpdfstring{$\ast$}{*}cm\texorpdfstring{$^\wedge$}{\string^}2\texorpdfstring{$\ast$}{*}\+Hz).

see \href{https://www.ucolick.org/~bolte/AY257/s_n.pdf}{\texttt{ https\+://www.\+ucolick.\+org/\texorpdfstring{$\sim$}{\string~}bolte/\+AY257/s\+\_\+n.\+pdf}} 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_observation_af8238641e874a89a1e579dd6ae40491b}\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily \label{class_observation_af8238641e874a89a1e579dd6ae40491b} 
Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{Telescope}]{tel\+\_\+name}{, }\item[{double}]{exposure\+\_\+time}{, }\item[{int}]{exposure\+\_\+num}{, }\item[{size\+\_\+t}]{Npix\+\_\+x}{, }\item[{size\+\_\+t}]{Npix\+\_\+y}{, }\item[{float}]{oversample}{}\end{DoxyParamCaption})}



Creates an observation setup that mimics a known instrument. 


\begin{DoxyItemize}
\item 
\end{DoxyItemize}\Hypertarget{class_observation_ab99834678bfa2e4381818218a07b8e2d}\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily \label{class_observation_ab99834678bfa2e4381818218a07b8e2d} 
Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{diameter}{, }\item[{float}]{transmission}{, }\item[{float}]{my\+\_\+exp\+\_\+time}{, }\item[{int}]{my\+\_\+exp\+\_\+num}{, }\item[{float}]{my\+\_\+back\+\_\+mag}{, }\item[{float}]{my\+\_\+read\+\_\+out\+\_\+noise}{, }\item[{size\+\_\+t}]{Npix\+\_\+x}{, }\item[{size\+\_\+t}]{Npix\+\_\+y}{, }\item[{double}]{my\+\_\+pix\+\_\+size}{, }\item[{float}]{my\+\_\+seeing}{ = {\ttfamily 0.}}\end{DoxyParamCaption})}


\begin{DoxyItemize}
\item Creates a custom observation setup with parameters decided by the user.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em diameter} & Diameter of telescope (in cm) (Collecting area is pi/4.\texorpdfstring{$\ast$}{*}diameter\texorpdfstring{$^\wedge$}{\string^}2) \\
\hline
{\em transmission} & Total transmission of the telescope (/int T(\textbackslash{}lambda)/\textbackslash{}lambda d\textbackslash{}lambda) \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec\texorpdfstring{$^\wedge$}{\string^}2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em seeing} & FWHM in arcsecs of the image \\
\hline
\end{DoxyParams}
\Hypertarget{class_observation_ab842a1f17359571a3ca2008694a232f2}\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily \label{class_observation_ab842a1f17359571a3ca2008694a232f2} 
Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{diameter}{, }\item[{float}]{transmission}{, }\item[{float}]{my\+\_\+exp\+\_\+time}{, }\item[{int}]{my\+\_\+exp\+\_\+num}{, }\item[{float}]{my\+\_\+back\+\_\+mag}{, }\item[{float}]{ron}{, }\item[{std\+::string}]{psf\+\_\+file}{, }\item[{size\+\_\+t}]{Npix\+\_\+x}{, }\item[{size\+\_\+t}]{Npix\+\_\+y}{, }\item[{double}]{my\+\_\+pix\+\_\+size}{, }\item[{float}]{oversample}{ = {\ttfamily 1.}}\end{DoxyParamCaption})}

Creates a custom observation setup with parameters decided by the user. Allows for the use of a psf fits image.


\begin{DoxyParams}{Parameters}
{\em diameter} & Diameter of telescope (in cm) (Collecting area is pi/4.\texorpdfstring{$\ast$}{*}diameter\texorpdfstring{$^\wedge$}{\string^}2) \\
\hline
{\em transmission} & Total transmission of the telescope (/int T(\textbackslash{}lambda)/\textbackslash{}lambda d\textbackslash{}lambda) \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec\texorpdfstring{$^\wedge$}{\string^}2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em psf\+\_\+file} & Input PSF image \\
\hline
{\em oversample} & Oversampling rate of the PSF image \\
\hline
\end{DoxyParams}
\Hypertarget{class_observation_ad634b9053c3e27dd17614628602e00a0}\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily \label{class_observation_ad634b9053c3e27dd17614628602e00a0} 
Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{zeropoint\+\_\+mag}{, }\item[{float}]{exp\+\_\+time}{, }\item[{int}]{exp\+\_\+num}{, }\item[{float}]{back\+\_\+mag}{, }\item[{float}]{read\+\_\+out\+\_\+noise}{, }\item[{size\+\_\+t}]{Npix\+\_\+x}{, }\item[{size\+\_\+t}]{Npix\+\_\+y}{, }\item[{double}]{pix\+\_\+size}{, }\item[{float}]{seeing}{ = {\ttfamily 0}}\end{DoxyParamCaption})}

Creates a custom observation setup with parameters decided by the user.


\begin{DoxyParams}{Parameters}
{\em zeropoint\+\_\+mag} & Magnitude that produces one count per second on the detector \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec\texorpdfstring{$^\wedge$}{\string^}2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em seeing} & FWHM in arcsecs of the image \\
\hline
\end{DoxyParams}
\Hypertarget{class_observation_a30716af254518e91b4bbce9fc6912f64}\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily \label{class_observation_a30716af254518e91b4bbce9fc6912f64} 
Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{zeropoint\+\_\+mag}{, }\item[{float}]{exp\+\_\+time}{, }\item[{int}]{exp\+\_\+num}{, }\item[{float}]{back\+\_\+mag}{, }\item[{float}]{myread\+\_\+out\+\_\+noise}{, }\item[{std\+::string}]{psf\+\_\+file}{, }\item[{size\+\_\+t}]{Npix\+\_\+x}{, }\item[{size\+\_\+t}]{Npix\+\_\+y}{, }\item[{double}]{pix\+\_\+size}{, }\item[{float}]{oversample}{ = {\ttfamily 1.}}\end{DoxyParamCaption})}

Creates a custom observation setup with parameters decided by the user. Allows for the use of a psf fits image.


\begin{DoxyParams}{Parameters}
{\em zeropoint\+\_\+mag} & Magnitude that produces one count per second on the detector \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec\texorpdfstring{$^\wedge$}{\string^}2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em psf\+\_\+file} & Input PSF image \\
\hline
{\em oversample} & Oversampling rate of the PSF image \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_observation_aa3d49144d1e21e4900d12f5f5abf4535}\index{Observation@{Observation}!Convert@{Convert}}
\index{Convert@{Convert}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Convert()}{Convert()}}
{\footnotesize\ttfamily \label{class_observation_aa3d49144d1e21e4900d12f5f5abf4535} 
template$<$typename T $>$ \\
void Observation\+::\+Convert (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&}]{map\+\_\+in}{, }\item[{\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&}]{map\+\_\+out}{, }\item[{\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}}$<$ T $>$ \&}]{error\+\_\+map}{, }\item[{bool}]{psf}{, }\item[{bool}]{noise}{, }\item[{\mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&}]{ran}{, }\item[{bool}]{cosmic}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Converts the input map to a realistic image. 


\begin{DoxyParams}{Parameters}
{\em map} & Input map in photons/(cm\texorpdfstring{$^\wedge$}{\string^}2\texorpdfstring{$\ast$}{*}\+Hz) \\
\hline
{\em psf} & Decides if the psf smoothing is applied \\
\hline
{\em noise} & Decides if noise is added \\
\hline
{\em unit} & Decides units of output (if flux, output is in 10\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}(-\/0.\+4\texorpdfstring{$\ast$}{*}mag)) \\
\hline
\end{DoxyParams}
\Hypertarget{class_observation_a1866e210a777eb8cadc9d33237f6df2f}\index{Observation@{Observation}!getBackgroundNoise@{getBackgroundNoise}}
\index{getBackgroundNoise@{getBackgroundNoise}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{getBackgroundNoise()}{getBackgroundNoise()}}
{\footnotesize\ttfamily \label{class_observation_a1866e210a777eb8cadc9d33237f6df2f} 
float Observation\+::get\+Background\+Noise (\begin{DoxyParamCaption}\item[{float}]{resolution}{, }\item[{Unit\+Type}]{unit}{ = {\ttfamily UnitType\+:\+:counts\+\_\+x\+\_\+sec}}\end{DoxyParamCaption}) const}



pixel size in radians 

Outputs rms of noise counts due to background and instrument in the unit decided by the user 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
SLsim\+Lib/include/image\+\_\+processing.\+h\item 
SLsim\+Lib/\+Image\+Processing/observation.\+cpp\end{DoxyCompactItemize}
