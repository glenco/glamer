\hypertarget{class_observation}{}\doxysection{Observation Class Reference}
\label{class_observation}\index{Observation@{Observation}}


It creates a realistic image from the output of a ray-\/tracing simulation.  




{\ttfamily \#include $<$image\+\_\+processing.\+h$>$}



Inherits Obs.

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_observation_a69a026d1fbd9aa9dcda07462405c4c13}{Observation}} (Telescope tel\+\_\+name, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y)
\begin{DoxyCompactList}\small\item\em Creates an observation setup that mimics a known instrument. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_observation_ab99834678bfa2e4381818218a07b8e2d}{Observation}} (float diameter, float transmission, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float seeing=0.)
\item 
\mbox{\hyperlink{class_observation_ab842a1f17359571a3ca2008694a232f2}{Observation}} (float diameter, float transmission, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, std\+::string psf\+\_\+file, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float oversample=1.)
\item 
\mbox{\hyperlink{class_observation_ad634b9053c3e27dd17614628602e00a0}{Observation}} (float zeropoint\+\_\+mag, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float seeing=0)
\item 
\mbox{\hyperlink{class_observation_a30716af254518e91b4bbce9fc6912f64}{Observation}} (float zeropoint\+\_\+mag, float exp\+\_\+time, int exp\+\_\+num, float back\+\_\+mag, float read\+\_\+out\+\_\+noise, std\+::string psf\+\_\+file, size\+\_\+t Npix\+\_\+x, size\+\_\+t Npix\+\_\+y, double pix\+\_\+size, float oversample=1.)
\item 
\mbox{\Hypertarget{class_observation_a1b0da1260df5bfe9eb7a5e7b3bd175ea}\label{class_observation_a1b0da1260df5bfe9eb7a5e7b3bd175ea}} 
float {\bfseries get\+Exp\+Time} () const
\item 
\mbox{\Hypertarget{class_observation_a9edc68c423a9f2882c50f8eb688af763}\label{class_observation_a9edc68c423a9f2882c50f8eb688af763}} 
int {\bfseries get\+Exp\+Num} () const
\item 
\mbox{\Hypertarget{class_observation_af08c80bc26f44e87047de91993e21332}\label{class_observation_af08c80bc26f44e87047de91993e21332}} 
float {\bfseries get\+Back\+Mag} () const
\item 
\mbox{\Hypertarget{class_observation_a142c63994e94603016c90e5dc4aba6fc}\label{class_observation_a142c63994e94603016c90e5dc4aba6fc}} 
float \mbox{\hyperlink{class_observation_a142c63994e94603016c90e5dc4aba6fc}{get\+Ron}} () const
\begin{DoxyCompactList}\small\item\em read-\/out noise in electrons/pixel \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_observation_af67cdb34b8ae50c22243ad3f7cfe3926}\label{class_observation_af67cdb34b8ae50c22243ad3f7cfe3926}} 
float \mbox{\hyperlink{class_observation_af67cdb34b8ae50c22243ad3f7cfe3926}{get\+Seeing}} () const
\begin{DoxyCompactList}\small\item\em seeing in arcsecs \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_observation_af8fa0620fb804297e4db01f9da32e747}\label{class_observation_af8fa0620fb804297e4db01f9da32e747}} 
float {\bfseries get\+Zeropoint} () const
\item 
float \mbox{\hyperlink{class_observation_a1866e210a777eb8cadc9d33237f6df2f}{get\+Background\+Noise}} (float resolution, Unit\+Type unit=Unit\+Type\+::counts\+\_\+x\+\_\+sec) const
\begin{DoxyCompactList}\small\item\em pixel size in radians \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_observation_a9355303af83acb36adf80e5427447c7b}\label{class_observation_a9355303af83acb36adf80e5427447c7b}} 
float {\bfseries get\+Background\+Noise} () const
\item 
\mbox{\Hypertarget{class_observation_ab1e76ec7f9d1765cd183376d19c71119}\label{class_observation_ab1e76ec7f9d1765cd183376d19c71119}} 
void \mbox{\hyperlink{class_observation_ab1e76ec7f9d1765cd183376d19c71119}{Add\+Noise}} (\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&pmap, \mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&error\+\_\+map, \mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&ran, bool dummy)
\begin{DoxyCompactList}\small\item\em Applies realistic noise (read-\/out + Poisson) on an image, returns noise map. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_observation_a8a016ecae1a0059cec10830aa4689612}{Convert}} (\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&map\+\_\+in, \mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&map\+\_\+out, \mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&error\+\_\+map, bool psf, bool noise, \mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&ran)
\begin{DoxyCompactList}\small\item\em Converts the input map to a realistic image. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_observation_a670be0f361abb519391ff0c30c907c1d}\label{class_observation_a670be0f361abb519391ff0c30c907c1d}} 
void \mbox{\hyperlink{class_observation_a670be0f361abb519391ff0c30c907c1d}{set\+Exp\+Time}} (float time)
\begin{DoxyCompactList}\small\item\em returns factor by which code image units need to be multiplied by to get flux units \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_observation_a99fdbd23ab8d25e959cee5c215b464d2}\label{class_observation_a99fdbd23ab8d25e959cee5c215b464d2}} 
void {\bfseries set\+Pixel\+Size} (float pixel\+\_\+size)
\item 
\mbox{\Hypertarget{class_observation_acecbbbe6aa9867a7c6be8c14638f320e}\label{class_observation_acecbbbe6aa9867a7c6be8c14638f320e}} 
double {\bfseries mag\+\_\+to\+\_\+flux} (double m) const
\item 
\mbox{\Hypertarget{class_observation_a195926678b3eb6d7f89f11effdcdf5db}\label{class_observation_a195926678b3eb6d7f89f11effdcdf5db}} 
double {\bfseries flux\+\_\+to\+\_\+mag} (double flux) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
It creates a realistic image from the output of a ray-\/tracing simulation. 

It translates pixel values in observed units (counts/sec), applies P\+SF and noise. Input must be in ergs/(s$\ast$cm$^\wedge$2$\ast$\+Hz).

see \href{https://www.ucolick.org/~bolte/AY257/s_n.pdf}{\texttt{ https\+://www.\+ucolick.\+org/$\sim$bolte/\+A\+Y257/s\+\_\+n.\+pdf}} 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_observation_a69a026d1fbd9aa9dcda07462405c4c13}\label{class_observation_a69a026d1fbd9aa9dcda07462405c4c13}} 
\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{Telescope}]{tel\+\_\+name,  }\item[{size\+\_\+t}]{Npix\+\_\+x,  }\item[{size\+\_\+t}]{Npix\+\_\+y }\end{DoxyParamCaption})}



Creates an observation setup that mimics a known instrument. 


\begin{DoxyItemize}
\item 
\end{DoxyItemize}\mbox{\Hypertarget{class_observation_ab99834678bfa2e4381818218a07b8e2d}\label{class_observation_ab99834678bfa2e4381818218a07b8e2d}} 
\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{diameter,  }\item[{float}]{transmission,  }\item[{float}]{exp\+\_\+time,  }\item[{int}]{exp\+\_\+num,  }\item[{float}]{back\+\_\+mag,  }\item[{float}]{read\+\_\+out\+\_\+noise,  }\item[{size\+\_\+t}]{Npix\+\_\+x,  }\item[{size\+\_\+t}]{Npix\+\_\+y,  }\item[{double}]{pix\+\_\+size,  }\item[{float}]{seeing = {\ttfamily 0.} }\end{DoxyParamCaption})}


\begin{DoxyItemize}
\item Creates a custom observation setup with parameters decided by the user.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em diameter} & Diameter of telescope (in cm) (Collecting area is pi/4.$\ast$diameter$^\wedge$2) \\
\hline
{\em transmission} & Total transmission of the telescope (/int T(\textbackslash{}lambda)/\textbackslash{}lambda d\textbackslash{}lambda) \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec$^\wedge$2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em seeing} & F\+W\+HM in arcsecs of the image \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_observation_ab842a1f17359571a3ca2008694a232f2}\label{class_observation_ab842a1f17359571a3ca2008694a232f2}} 
\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{diameter,  }\item[{float}]{transmission,  }\item[{float}]{exp\+\_\+time,  }\item[{int}]{exp\+\_\+num,  }\item[{float}]{back\+\_\+mag,  }\item[{float}]{ron,  }\item[{std\+::string}]{psf\+\_\+file,  }\item[{size\+\_\+t}]{Npix\+\_\+x,  }\item[{size\+\_\+t}]{Npix\+\_\+y,  }\item[{double}]{pix\+\_\+size,  }\item[{float}]{oversample = {\ttfamily 1.} }\end{DoxyParamCaption})}

Creates a custom observation setup with parameters decided by the user. Allows for the use of a psf fits image.


\begin{DoxyParams}{Parameters}
{\em diameter} & Diameter of telescope (in cm) (Collecting area is pi/4.$\ast$diameter$^\wedge$2) \\
\hline
{\em transmission} & Total transmission of the telescope (/int T(\textbackslash{}lambda)/\textbackslash{}lambda d\textbackslash{}lambda) \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec$^\wedge$2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em psf\+\_\+file} & Input P\+SF image \\
\hline
{\em oversample} & Oversampling rate of the P\+SF image \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_observation_ad634b9053c3e27dd17614628602e00a0}\label{class_observation_ad634b9053c3e27dd17614628602e00a0}} 
\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{zeropoint\+\_\+mag,  }\item[{float}]{exp\+\_\+time,  }\item[{int}]{exp\+\_\+num,  }\item[{float}]{back\+\_\+mag,  }\item[{float}]{read\+\_\+out\+\_\+noise,  }\item[{size\+\_\+t}]{Npix\+\_\+x,  }\item[{size\+\_\+t}]{Npix\+\_\+y,  }\item[{double}]{pix\+\_\+size,  }\item[{float}]{seeing = {\ttfamily 0} }\end{DoxyParamCaption})}

Creates a custom observation setup with parameters decided by the user.


\begin{DoxyParams}{Parameters}
{\em zeropoint\+\_\+mag} & Magnitude that produces one count per second on the detector \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec$^\wedge$2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em seeing} & F\+W\+HM in arcsecs of the image \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_observation_a30716af254518e91b4bbce9fc6912f64}\label{class_observation_a30716af254518e91b4bbce9fc6912f64}} 
\index{Observation@{Observation}!Observation@{Observation}}
\index{Observation@{Observation}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Observation()}{Observation()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily Observation\+::\+Observation (\begin{DoxyParamCaption}\item[{float}]{zeropoint\+\_\+mag,  }\item[{float}]{exp\+\_\+time,  }\item[{int}]{exp\+\_\+num,  }\item[{float}]{back\+\_\+mag,  }\item[{float}]{read\+\_\+out\+\_\+noise,  }\item[{std\+::string}]{psf\+\_\+file,  }\item[{size\+\_\+t}]{Npix\+\_\+x,  }\item[{size\+\_\+t}]{Npix\+\_\+y,  }\item[{double}]{pix\+\_\+size,  }\item[{float}]{oversample = {\ttfamily 1.} }\end{DoxyParamCaption})}

Creates a custom observation setup with parameters decided by the user. Allows for the use of a psf fits image.


\begin{DoxyParams}{Parameters}
{\em zeropoint\+\_\+mag} & Magnitude that produces one count per second on the detector \\
\hline
{\em exp\+\_\+time} & Total exposure time \\
\hline
{\em exp\+\_\+num} & Number of exposures \\
\hline
{\em back\+\_\+mag} & Flux due to background and/or sky in mag/arcsec$^\wedge$2 \\
\hline
{\em read\+\_\+out\+\_\+noise} & Read-\/out noise in electrons/pixel \\
\hline
{\em psf\+\_\+file} & Input P\+SF image \\
\hline
{\em oversample} & Oversampling rate of the P\+SF image \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_observation_a8a016ecae1a0059cec10830aa4689612}\label{class_observation_a8a016ecae1a0059cec10830aa4689612}} 
\index{Observation@{Observation}!Convert@{Convert}}
\index{Convert@{Convert}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{Convert()}{Convert()}}
{\footnotesize\ttfamily void Observation\+::\+Convert (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&}]{map\+\_\+in,  }\item[{\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&}]{map\+\_\+out,  }\item[{\mbox{\hyperlink{class_pixel_map}{Pixel\+Map}} \&}]{error\+\_\+map,  }\item[{bool}]{psf,  }\item[{bool}]{noise,  }\item[{\mbox{\hyperlink{class_utilities_1_1_random_numbers___n_r}{Utilities\+::\+Random\+Numbers\+\_\+\+NR}} \&}]{ran }\end{DoxyParamCaption})}



Converts the input map to a realistic image. 


\begin{DoxyParams}{Parameters}
{\em map} & Input map in photons/(cm$^\wedge$2$\ast$\+Hz) \\
\hline
{\em psf} & Decides if the psf smoothing is applied \\
\hline
{\em noise} & Decides if noise is added \\
\hline
{\em unit} & Decides units of output (if flux, output is in 10$\ast$$\ast$(-\/0.\+4$\ast$mag)) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_observation_a1866e210a777eb8cadc9d33237f6df2f}\label{class_observation_a1866e210a777eb8cadc9d33237f6df2f}} 
\index{Observation@{Observation}!getBackgroundNoise@{getBackgroundNoise}}
\index{getBackgroundNoise@{getBackgroundNoise}!Observation@{Observation}}
\doxysubsubsection{\texorpdfstring{getBackgroundNoise()}{getBackgroundNoise()}}
{\footnotesize\ttfamily float Observation\+::get\+Background\+Noise (\begin{DoxyParamCaption}\item[{float}]{resolution,  }\item[{Unit\+Type}]{unit = {\ttfamily UnitType\+:\+:counts\+\_\+x\+\_\+sec} }\end{DoxyParamCaption}) const}



pixel size in radians 

Outputs rms of noise counts due to background and instrument in the unit decided by the user 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
S\+Lsim\+Lib/include/image\+\_\+processing.\+h\item 
S\+Lsim\+Lib/\+Image\+Processing/observation.\+cpp\end{DoxyCompactItemize}
