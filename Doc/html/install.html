<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>GLAMERDOC++: Installing GLAMER</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GLAMERDOC++
   </div>
   <div id="projectbrief">Gravitational Lensing Code Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installing GLAMER </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Installing <em>GLAMER</em> is a mostly straightforward process, thanks to the <em>CMake</em> build system which handles configuration options, dependency resolution, and integration into projects.</p>
<h2>The build system </h2>
<p>The <em>GLAMER</em> libraries are built using the <a href="http://www.cmake.org" title="CMake">CMake</a> build system. <em>CMake</em> is a meta build system which generates the files required by your build environment of choice, such as</p>
<ul>
<li>Unix Makefiles</li>
<li>Xcode</li>
<li>Eclipse</li>
<li>...</li>
</ul>
<h3>Getting CMake</h3>
<p>The installation of <em>CMake</em> on all major platforms is straightforward. There are binary installation packages available on the <em>CMake</em> website.</p>
<p>For Linux, <em>CMake</em> can be found in most package managers natively.</p>
<p>For Mac OS X, <em>CMake</em> is available from both <a href="http://www.brew.sh" title="Homebrew — The missing package manager for OS X">Homebrew</a>, <a href="https://www.macports.org" title="The MacPorts Project">MacPorts</a> or &lt;a href="https://docs.conda.io/projects/conda/en/latest/""&gt;conda.</p>
<h3>Using CMake</h3>
<p><em>CMake</em> is a command-line tool that takes input files (called <code>CMakeLists.txt</code>) and processes them into files for your build system of choice (via a generator), optionally taking into account project-specific options. The normal workflow is the following:</p>
<ol type="1">
<li>Get source code containing <code>CMakeLists.txt</code> files for cmake to process.</li>
<li>Create a new subdirectory which will contain the generated files. This is, in the language of cmake, an "out-of-source" build and the preferred mode of operation, since it does not contaminate the source directory (and cmake generates quite a number of files). The subdirectory is usually called "build".</li>
<li>Call cmake with appropriate arguments to generate files for your build system (or IDE).</li>
<li>Build using your usual method of choice.</li>
</ol>
<h2>Dependancies </h2>
<p>Before starting to configure and build <em>GLAMER</em>, it is advisable to resolve all necessary dependencies, since the cmake configuration will automatically detect settings based on the libraries it can find.</p>
<p>All the dependancies should be available through the package managment system &lt;a href="https://docs.conda.io/projects/conda/en/latest/""&gt;conda. It is recommended that you use this to install and update the dependencies.</p>
<p>The <em>GLAMER</em> library requires some libraries by default and others are optional.</p>
<table class="doxtable">
<tr>
<th>Library </th><th>Required by </th><th></th><th>Description  </th></tr>
<tr>
<td><a href="https://heasarc.gsfc.nasa.gov/fitsio/fitsio.html" title="CFITSIO">CFITSIO</a> </td><td><code>ENABLE_FITS</code> </td><td>required</td><td>Library for reading and writing files in the FITS format. </td></tr>
<tr>
<td><a href="https://heasarc.gsfc.nasa.gov/fitsio/CCfits/" title="CCfits">CCfits</a>¹ </td><td><code>ENABLE_FITS</code> </td><td>required</td><td>C++ wrapper for <em>CFITSIO</em>. </td></tr>
<tr>
<td><a href="http://www.fftw.org" title="FFTW Home Page">FFTW</a> </td><td><code>ENABLE_FFTW</code> </td><td>required</td><td>Library for Fast Fourier Transform algorithms. </td></tr>
<tr>
<td><a href="http://www.gnu.org/software/gsl/" title="GNU Scientific Library">GSL</a> </td><td><code>ENABLE_GSL</code> </td><td>optional</td><td>Library for scientific computation </td></tr>
<tr>
<td>&lt;a href="https://support.hdfgroup.org/HDF5/doc/cpplus_RM/index.html""&gt;HDF5 C++&lt;/a&gt;    &lt;td&gt; &lt;tt&gt;ENABLE_HDF5&lt;/tt&gt; &lt;td&gt;optional&lt;td&gt; I/O in hdf5 format
&lt;tr&gt;&lt;td&gt;&lt;a href="<a href="https://healpix.jpl.nasa.gov/html/Healpix_cxx/index.html">https://healpix.jpl.nasa.gov/html/Healpix_cxx/index.html</a>""&gt;HealPix </td><td>ENABLE_HEALPIX </td><td>optional</td><td>C++ Healpix interface </td></tr>
</table>
<h2>Building the library </h2>
<p>After extracting the library, you will be find a directory structure that contains folders for the individual <em>GLAMER</em> sub-libraries, together with an additional <code>examples</code> folder containing a sample project, and a <code>cmake</code> folder containing necessary files for <em>CMake</em>.</p>
<p>In order to build <em>GLAMER</em> using cmake, the following steps are necessary:</p>
<ol type="1">
<li>Create a <code>build</code> directory for building the <em>GLAMER</em> libraries. <pre class="fragment">$ mkdir build
$ cd build
</pre></li>
<li>Run <code>cmake</code> with arguments. You will probably want to set the generator and maybe some of the <em>GLAMER</em>-specific options. Here we generate Unix Makefiles and enable <em>FITS</em> and <em>FFTW</em> functions. <pre class="fragment">$ cmake .. -G "Unix Makefiles" [-DENABLE_GSL=ON]
</pre></li>
<li>At this point, you are presented with a Makefile or project inside the <code>build</code> directory which you can use to build the library. <pre class="fragment">$ make
</pre></li>
</ol>
<p>The last step of course depends on the type of generator you choose (using the <code>-G</code> flag). For IDEs like Xcode or Eclipse, you have to open the project that <em>CMake</em> generated and build the library from within the IDE.</p>
<h3>Rebuilding</h3>
<p>A very useful feature of cmake is that it caches all the configuration options you set in previous runs. Thus it is not necessary to specify options you want to keep unchanged on subsequent runs. Continuing the above example, you could turn off <em>FFTW</em> support using </p><pre class="fragment">$ cmake .. -DENABLE_FFTW=OFF
</pre><p>while keeping the generator and <code>ENABLE_FITS</code> options untouched.</p>
<p>It is necessary to regenerate the build files when sources are added or removed. Luckily, your build system should automatically check whether <code>cmake</code> needs to be rerun for you before building.</p>
<h2>Build options </h2>
<p>Options can be set from the command-line using </p><pre class="fragment">cmake .. -G &lt;generator&gt; -D&lt;option&gt;=&lt;value&gt;
</pre><p>For a list of available generators, use <code>cmake -h</code>.</p>
<p>The following options can be passed to <code>cmake</code> for building <em>GLAMER</em>:</p>
<table class="doxtable">
<tr>
<th>Option </th><th>Values </th><th>Default </th><th>Description  </th></tr>
<tr>
<td><code>USE_CXX11</code> </td><td><code>ON</code>, <code>OFF</code> </td><td><code>ON</code> </td><td>Use the C++11 standard if supported by the compiler. </td></tr>
<tr>
<td><code>N_THREADS</code> </td><td>1, 2, ... </td><td>1 </td><td>Set to the maximum number of threads to be used. </td></tr>
<tr>
<td><code>ENABLE_FITS</code> </td><td><code>ON</code>, <code>OFF</code> </td><td><code>ON</code> </td><td>Enable functions that need FITS support. </td></tr>
<tr>
<td><code>ENABLE_FFTW</code> </td><td><code>ON</code>, <code>OFF</code> </td><td><code>ON</code> </td><td>Enable functions that need FFTW support. </td></tr>
<tr>
<td><code>ENABLE_GSL</code> </td><td><code>ON</code>, <code>OFF</code> </td><td><code>OFF</code> </td><td>Enable functions that need GSL support. </td></tr>
<tr>
<td><code>_OPENMP</code> </td><td><code>ON</code>, <code>OFF</code> </td><td><code>OFF</code> </td><td>Enables openMP multi-threading. </td></tr>
</table>
<p>More detailed descriptions of the individual options can be found below.</p>
<p>The list of currently cached option values can be shown using </p><pre class="fragment">$ cmake .. -L
</pre><h3>Option <code>ENABLE_GSL</code></h3>
<p>This enables some halo model calculations in CosmoLib.</p>
<h3>Option <code>_OPENMP</code></h3>
<p>This is used in only one place and should be considered obsolete.</p>
<h2>Using GLAMER </h2>
<p>Once the <em>GLAMER</em> libraries are built inside your build tree, they can be linked with your executables as usual. However, you might want to try and manage your project with <em>CMake</em> instead.</p>
<p>Having built the <em>GLAMER</em> libraries with CMake makes it easy to integrate them into projects. Most of the process is automated by <em>CMake</em>. It is important to have built <em>GLAMER</em> before setting up a project, since <em>CMake</em> then remembers where to find the libraries.</p>
<h3>Creating new projects</h3>
<p>The easiest way to start a project is to copy the sample project from the <code>examples/project</code> folder or clone one of the example projects from the [Glenco Github page]("https://github.com/glenco"), specifically [Example1]("https://github.com/glenco/Example1"), [ExampleImage]("https://github.com/glenco/ExampleImage") and [ParticleExample]("https://github.com/glenco/ParticleExample"). The new project should be in its own directory outside of the <em>GLAMER</em> directory tree.</p>
<p>In the enclosed <code>CMakeLists.txt</code> file, all instances of the "sample" name have to be replaced with the actual name of the project. Sources and headers can be added to the appropriate lists.</p>
<h3>Existing cmake projects</h3>
<p>For projects already using <em>CMake</em>, integrating <em>GLAMER</em> is as simple as calling </p><pre class="fragment">find_package(GLAMER NO_MODULE REQUIRED)
</pre><p>before creating any targets. This will load the <em>GLAMER</em> configuration, import the library targets and set variables containing the include directories and libraries necessary for <em>GLAMER</em>, including all dependencies. These can then be set using the usual </p><pre class="fragment">include_directories(${GLAMER_INCLUDE_DIRS})
</pre><p>and </p><pre class="fragment">target_link_libraries(&lt;target&gt; ${GLAMER_LIBRARIES})
</pre><p>functions.</p>
<h3>Building projects</h3>
<p>Projects are built using <em>CMake</em> in the same way the libraries are built. After creating a build tree, cmake will configure and generate a project which can subsequently be used with the build tool of choice. </p><pre class="fragment">$ cd myproject
$ ls
CMakeLists.txt  main.cpp
$ mkdir build
$ cmake .. -G Xcode
$ open myproject.xcodeproj
</pre><p> or </p><pre class="fragment">$ cd myproject
$ ls
CMakeLists.txt  main.cpp
$ mkdir build
$ cmake .. 
$ make
</pre><p> If you are not using Xcode.</p>
<p><b>Note:</b> Building the project will not build the GLAMER libraries automatically! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 19 2019 10:08:26 for GLAMERDOC++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
